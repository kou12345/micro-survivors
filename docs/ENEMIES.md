# 敵キャラクター仕様

> このドキュメントは `public/js/weapons.js` の `ENEMY_TYPES` と対応しています。
> コードを変更した場合は、このドキュメントも更新してください。

## 敵一覧

### 雑菌（Germ）

| 項目 | 値 |
|------|-----|
| 見た目 | 緑のつぶつぶ（12角形） |
| 色 | #2ecc71 |
| サイズ | 12px |
| HP | 15 |
| 移動速度 | 1 |
| 接触ダメージ | 5 |
| 経験値 | 3 |

**特徴**: 最も基本的な敵。大量に出現する。

**出現条件**: ゲーム開始時から出現

---

### ウイルス（Virus）

| 項目 | 値 |
|------|-----|
| 見た目 | 赤い丸（トゲ付き） |
| 色 | #e74c3c |
| サイズ | 10px |
| HP | 8 |
| 移動速度 | 2.5 |
| 接触ダメージ | 8 |
| 経験値 | 5 |

**特徴**: 素早いが低体力。回避が難しい。

**出現条件**: ゲーム進行10%以降（約1分後）

---

### バクテリア（Bacteria）

| 項目 | 値 |
|------|-----|
| 見た目 | 棒状（角丸長方形） |
| 色 | #9b59b6 |
| サイズ | 20px |
| 横幅 | 30px |
| 縦幅 | 12px |
| HP | 40 |
| 移動速度 | 0.8 |
| 接触ダメージ | 12 |
| 経験値 | 10 |

**特徴**: 体力が多く倒しにくい。ゆっくり近づいてくる。

**出現条件**: ゲーム進行30%以降（約3分後）

---

## 敵のスケーリング

### 時間経過によるHP補正

敵のHPはゲーム進行に応じてスケールします：

```
実際のHP = 基本HP × (1 + progress × 2)
```

- `progress` = 経過時間 / ゲーム時間
- 例: 5分経過（10分ゲーム）の場合、progress = 0.5
  - HP倍率 = 1 + 0.5 × 2 = 2倍

### ウェーブ時の追加補正

ウェーブで出現する敵は追加でHP補正を受けます：

```
実際のHP = 基本HP × (1 + progress × 2) × (1 + waveNumber × 0.1)
```

- ウェーブ1: +10%
- ウェーブ2: +20%
- ウェーブ3: +30%
- ...

---

## 敵の行動パターン

すべての敵は同じ基本AIを持っています：

1. **移動**: プレイヤーに向かって直線的に移動
2. **攻撃**: プレイヤーとの接触時にダメージを与える
3. **死亡**: HPが0になるとXPオーブをドロップ

```javascript
// 移動ロジック（entities.js より）
const dx = player.x - this.x;
const dy = player.y - this.y;
const dist = Math.hypot(dx, dy);
this.x += (dx / dist) * this.speed;
this.y += (dy / dist) * this.speed;
```

---

## スポーン仕様

### 通常スポーン

- スポーン間隔: `1000ms - min(経過時間/1000, 800)ms`
  - 開始時: 約1秒に1体
  - 終盤: 約0.2秒に1体
- スポーン位置: プレイヤーから画面外（約100px外側）
- スポーン角度: ランダム（360度）

### ウェーブスポーン

- 発生間隔: 30秒ごと
- 予告: 3秒前に警告表示
- 基本敵数: 15体
- 増加数: ウェーブごとに+8体
- スポーン配置: プレイヤーを囲む円形

---

## 実装ファイル

- 敵定義: `public/js/weapons.js` - `ENEMY_TYPES` オブジェクト
- 敵クラス: `public/js/entities.js` - `Enemy` クラス
- スポーンロジック: `public/js/game.js` - `spawnEnemy()`, `spawnWave()`
- 描画処理: `public/js/entities.js` - `Enemy.draw()`
